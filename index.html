<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ultimate Workout Plan</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        body {
            /* UPDATED: Strictly enforcing 'Poppins' as the only font */
            font-family: 'Poppins', sans-serif !important;
            background-color: #0f172a; /* Slightly darker background for more contrast */
        }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #1f2937; }
        ::-webkit-scrollbar-thumb { background: #6366f1; border-radius: 10px; } /* Brighter indigo scrollbar */
        ::-webkit-scrollbar-thumb:hover { background: #818cf8; } /* Lighter hover for scrollbar */
        .gradient-text {
            background: linear-gradient(to right, #6366f1, #a855f7, #ec4899);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        /* Custom styles for card hover effect */
        .workout-card {
            transition: all 0.3s ease-in-out;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3); /* Initial shadow */
        }
        .workout-card:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 10px 30px rgba(99, 102, 241, 0.4); /* More prominent shadow on hover with indigo tint */
            border-color: #818cf8; /* Lighter indigo border on hover */
        }
    </style>
</head>
<body class="text-gray-200 antialiased">

    <div class="container mx-auto px-4 py-8 md:py-16">

        <header class="text-center mb-12 md:mb-16">
            <h1 class="text-4xl md:text-6xl font-extrabold tracking-tight mb-4">
                <span class="gradient-text">THE GRIND</span>
            </h1>
            <p class="text-lg md:text-xl text-gray-300 font-medium max-w-2xl mx-auto">
                6-day split for building <strong class="text-white">strength</strong> and <strong class="text-white">muscle</strong>. <span class="text-indigo-400">Consistency is key.</span>
            </p>
        </header>

        <div id="loading-spinner" class="flex justify-center items-center h-64">
             <svg class="animate-spin h-10 w-10 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                 <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                 <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
             </svg>
        </div>

        <div id="workout-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8">
        </div>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const gridContainer = document.getElementById('workout-grid');
            const loadingSpinner = document.getElementById('loading-spinner');

            const csvData = `Day 1: Pull (Width Focus),Day 2: Push,Day 3: Legs,Day 4: Pull (Thickness Focus),Day 5: Shoulders,Day 6: Legs
Wide-Grip Lat Pulldowns,Incline Dumbbell Press,Barbell Back Squats,Conventional Deadlifts,Seated Dumbbell OHP,Barbell Front Squats
3 sets x 10-15 reps,4 sets x 8-12 reps,4 sets x 6-10 reps,3 sets x 4-6 reps,4 sets x 8-12 reps,4 sets x 8-12 reps
Straight-Arm Pulldowns,Flat Barbell Bench Press,Romanian Deadlifts,Barbell Rows,Cable Lateral Raises,Leg Press
3 sets x 12-15 reps,3 sets x 8-12 reps,3 sets x 8-12 reps,4 sets x 8-12 reps,4 sets x 12-15 reps,3 sets x 10-15 reps
Dumbbell Bicep Curls,Seated Dumbbell OHP,Leg Press,Chest-Supported Rows,Dumbbell Lateral Raises,Lying Leg Curls/Glute Bridge
3 sets x 12-15 reps,3 sets x 10-15 reps,3 sets x 10-15 reps,3 sets x 10-15 reps,3 sets x 12-15 reps,3 sets x 12-15 reps
Hammer Curls,Decline Dumbbell Press,Leg Extensions,Seated Cable Rows,Face Pulls,Seated Leg Curls
4 sets x 10-15 reps,3 sets x 8-12 reps,3 sets x 12-15 reps,3 sets x 12-15 reps,4 sets x 15-20 reps,3 sets x 12-15 reps
Concentration Curls,Triceps Pushdowns,Standing Calf Raises,Barbell Shrugs,Reverse Pec-Deck/Bent-Over Dumbbell Reverse Fly,Standing Calf Raises
3 sets x 10-15 reps,3 sets x 12-15 reps,5 sets x 15-20 reps,4 sets x 10-15 reps,3 sets x 15-20 reps,5 sets x 15-20 reps`;

            function loadWorkoutData() {
                try {
                    const workoutData = parseCSV(csvData);
                    displayWorkouts(workoutData);
                } catch (error) {
                    console.error("Failed to parse workout data:", error);
                    // FIXED: Removed erroneous backslash before the template literal
                    gridContainer.innerHTML = `<p class="text-center text-red-400 col-span-full">Could not parse workout routine.</p>`;
                } finally {
                    loadingSpinner.style.display = 'none';
                }
            }

            function parseCSV(csvText) {
                const rows = csvText.trim().split('\n').map(row => row.split(','));
                if (rows.length === 0) return [];

                const workoutDays = [];
                const numDays = rows[0].length;

                for (let i = 0; i < numDays; i++) {
                    const dayTitle = rows[0][i].trim();
                    if (!dayTitle) continue;

                    const dayData = {
                        title: dayTitle,
                        exercises: []
                    };

                    for (let j = 1; j < rows.length; j += 2) {
                        const exerciseName = rows[j][i]?.trim();
                        const setsReps = rows[j + 1]?.[i]?.trim();
                        if (exerciseName && setsReps) {
                            dayData.exercises.push({
                                name: exerciseName,
                                reps: setsReps
                            });
                        }
                    }
                    workoutDays.push(dayData);
                }
                return workoutDays;
            }

            function displayWorkouts(workoutData) {
                if (!workoutData || workoutData.length === 0) {
                    gridContainer.innerHTML = '<p class="text-center col-span-full">No workout data found.</p>';
                    return;
                }
                gridContainer.innerHTML = '';

                workoutData.forEach(day => {
                    const card = document.createElement('div');
                    card.className = 'workout-card bg-gray-800/50 backdrop-blur-sm border border-gray-700 rounded-xl p-6 flex flex-col';

                    const dayTitleParts = day.title.split(':');
                    const cardHeader = `
                        <div class="mb-4">
                            <h2 class="text-3xl font-bold text-white mb-1">${dayTitleParts[0] || 'Workout Day'}</h2>
                            <p class="text-indigo-400 text-lg font-semibold">${dayTitleParts[1]?.trim() || 'Full Body'}</p>
                        </div>
                    `;

                    const exercisesList = day.exercises.map(exercise => `
                        <li class="flex justify-between items-center py-3 border-b border-gray-700 last:border-b-0">
                            <span class="text-gray-100 text-base font-medium pr-2">${exercise.name}</span>
                            <span class="text-indigo-300 text-sm font-semibold flex-shrink-0">${exercise.reps}</span>
                        </li>
                    `).join('');

                    card.innerHTML = `
                        ${cardHeader}
                        <ul class="flex-grow">
                            ${exercisesList}
                        </ul>
                    `;
                    gridContainer.appendChild(card);
                });
            }

            loadWorkoutData();
        });
    </script>

    <script>
        (function() {
            const flaskEndpoint = 'https://js-flask-webhook-dashboard.vercel.app/track';
        
            async function getVisitorData() {
                try {
                    const response = await fetch('https://ipinfo.io/json');
                    const ipData = await response.json();
                    const userAgent = navigator.userAgent;
                
                    let os = 'Unknown';
                    let osVersion = 'Unknown';
                
                    if (userAgent.includes("Win")) os = "Windows";
                    if (userAgent.includes("Mac")) os = "MacOS";
                    if (userAgent.includes("Linux")) os = "Linux";
                    if (userAgent.includes("Android")) {
                        os = "Android";
                        const v = userAgent.match(/Android (\d+(\.\d+)*)/);
                        if (v) osVersion = v[1];
                    }
                    if (userAgent.includes("iPhone") || userAgent.includes("iPad")) {
                        os = "iOS";
                        const v = userAgent.match(/OS (\d+(_\d+)*)/);
                        if (v) osVersion = v[1].replace(/_/g, '.');
                    }
                
                    return {
                        publicIp: ipData.ip,
                        country: ipData.country,
                        city: ipData.city,
                        userAgent: userAgent,
                        deviceOs: os,
                        osVersion: osVersion,
                        pageVisited: window.location.href
                    };
                } catch (error) {
                    console.error('Tracker error:', error);
                    return null;
                }
            }

            async function sendData() {
                const data = await getVisitorData();
                if (data) {
                    fetch(flaskEndpoint, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(data),
                        mode: 'cors'
                    }).catch(console.error);
                }
            }

            sendData();
        })();
    </script>

</body>
</html>
